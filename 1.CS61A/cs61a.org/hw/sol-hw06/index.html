
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta name="description" content ="CS 61A: Structure and Interpretation of Computer Programs" />
    <meta name="keywords" content ="CS 61A, Computer Science, CS, 61A, Programming, John DeNero, Berkeley, EECS" />
    <meta name="author" content ="John DeNero, Hany Farid" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="viewport" content="width=device-width">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-throttle-debounce/1.1/jquery.ba-throttle-debounce.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="../../assets/js/hl.js"></script>
    <script src="../../assets/js/toggledarkmode.js"></script>
    <script>
        // we aren't registering builtins since
        //      (1) they don't render differently in the current CSS from other names
        //      (2) it's a mess to list all of them. You can extract from the site but that takes effort
        // if (1) ceases to be true, (2) might be worth the effort. For now, we're leaving as is
        hljsRegister({
            'keyword': "define if cond and or let begin lambda mu quote delay cons-stream set! quasiquote unquote unquote-splicing define-macro"
        });
        hljs.initHighlightingOnLoad();
    </script>
    <script src="../../assets/js/dark-mode.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inconsolata|Roboto:300,400,500|Work+Sans:400,700">
    <link rel="stylesheet" href="../../assets/css/style.css">
    <link rel="stylesheet" href="../../assets/css/mono-blue.css">
    <link rel="icon" href="../../assets/images/favicon.ico">

    

<link rel="stylesheet" type="text/css" href="../../assets/css/hw.css">


    <title>
Homework 6 Solutions | CS 61A Spring 2023
</title>
  </head>

  <body id="index" class="home">
    <nav class="navbar navbar-default navbar-static-top">
      <div class="container noselect">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse-section">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="../../index.html">
            <img style="max-width:60px; margin-top: -20px;" class="logo" src="../../assets/images/logo.png"/>
          </a>
        </div>

        <div class="collapse navbar-collapse" id="navbar-collapse-section">
          <ul class="nav navbar-nav navbar-right">
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="index.html#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Calendar
                <span class="caret"></span>
              </a>
              <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                <li><a href="../../weekly.html">Weekly Schedule</a></li>
                <li><a href="../../office-hours.html">Office Hours</a></li>
              </ul>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="index.html#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Links
                <span class="caret"></span>
              </a>
              <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                <li><a href="https://sections.cs61a.org">Sections Tool</a></li>
                <li><a href="https://oh.cs61a.org">Office Hours Queue</a></li>
                <li><a href="https://go.cs61a.org/regrade-request">Request a Regrade</a></li>
              </ul>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="index.html#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Staff
                <span class="caret"></span>
              </a>
              <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                <li><a href="../../instructor.html">Instructors</a></li>
                <li><a href="../../TAs.html">TAs</a></li>
                <li><a href="../../tutors.html">Tutors</a></li>
                <li><a href="../../academic-interns.html">Academic Interns</a></li>
              </ul>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="index.html#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Resources
                <span class="caret"></span>
              </a>
              <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                <li><a href="https://go.cs61a.org/extensions">Request an Extension</a></li>
                <li><a href="https://go.cs61a.org/accommodation-appts">Book an Accommodations Appointment</a></li>
                <li><a href="../../resources.1.html">Topical Resources + Past Exams</a></li>
                <li><a href="https://tutor.cs61a.org/">PythonTutor</a></li>
                <li><a href="https://code.cs61a.org/">Code</a></li>
                <li><a href="https://edstem.org/us/courses/34756/discussion/" target="_blank">Ed</a></li>
                <li><a href="../../articles/campus-res/index.html">Department/Campus Resources</a></li>
              </ul>
            </li>
            <li><a href="../../articles/about.html">Syllabus</a></li>
            <li><a href="../../contact.1.html">Contact</a></li>
            <li>
              <label class="switch">
                <input type="checkbox" id="toggle-mode-cb">
                <span class="slider round"></span>
              </label>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <main id="content" class="container">
      
<div class='row'>
  <div class='col-md-9'>
    <header>
      <h1>
        
Homework 6 Solutions

        
        
        <ul class="inline-block list-inline">
          <li><a href="hw06.zip" class="label label-outline">hw06.zip</a></li>
        </ul>
        
        
      </h1>
    </header>
    
<h2>Solution Files</h2>
<p>You can find the solutions in <a href="hw06.py">hw06.py</a>.</p>

    
<h1 id="required-questions">Required Questions</h1>


<br />

        <button id='toggle-1' class='btn btn-outline btn-lg alwaystoggle toggle'>
        Getting Started Videos<noscript> (enable JavaScript)</noscript>
        </button>
        <div class="solution toggle-1">

<h2 id="getting-started-videos">Getting Started Videos</h2>


<p>These videos may provide some helpful direction for tackling the coding
problems on this assignment.</p>

<blockquote><p>To see these videos, you should be logged into your berkeley.edu email.</p></blockquote>


            <iframe width="560" height="315" src="https://youtube.com/embed/videoseries?list=PLx38hZJ5RLZeCIJ7V-CGlRDMIa2xqg24i"
                frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"
                allowfullscreen></iframe><p><a href='https://youtu.be/playlist?list=PLx38hZJ5RLZeCIJ7V-CGlRDMIa2xqg24i'> YouTube link </a></p>
</div>


<h2 id="oop">OOP</h2>


<h3 id="q1-mint">Q1: Mint</h3>


<p>A mint is a place where coins are made. In this question, you'll implement a <code>Mint</code> class that can output a <code>Coin</code> with the correct year and worth.</p>

<ul>
  <li>Each <code>Mint</code> <em>instance</em> has a <code>year</code> stamp. The <code>update</code> method sets the
  <code>year</code> stamp of the instance to the <code>present_year</code> <em>class attribute</em> of the <code>Mint</code> <em>class</em>.</li>
  <li>The <code>create</code> method takes a subclass of <code>Coin</code> (<em>not</em> an instance!), then 
  creates and returns an <em>instance</em> of that class stamped with the <code>mint</code>'s year (which may be different from
  <code>Mint.present_year</code> if it has not been updated.)</li>
  <li>A <code>Coin</code>'s <code>worth</code> method returns the <code>cents</code> value of the coin plus one
  extra cent for each year of age <em>beyond 50</em>. A coin's age can be determined
  by subtracting the coin's year from the <code>present_year</code> class attribute of
  the <code>Mint</code> class.</li>
</ul>

<solution>

<pre><code>class Mint:
    &quot;&quot;&quot;A mint creates coins by stamping on years.

    The update method sets the mint&#x27;s stamp to Mint.present_year.

    &gt;&gt;&gt; mint = Mint()
    &gt;&gt;&gt; mint.year
    2022
    &gt;&gt;&gt; dime = mint.create(Dime)
    &gt;&gt;&gt; dime.year
    2022
    &gt;&gt;&gt; Mint.present_year = 2102  # Time passes
    &gt;&gt;&gt; nickel = mint.create(Nickel)
    &gt;&gt;&gt; nickel.year     # The mint has not updated its stamp yet
    2022
    &gt;&gt;&gt; nickel.worth()  # 5 cents + (80 &#x2d; 50 years)
    35
    &gt;&gt;&gt; mint.update()   # The mint&#x27;s year is updated to 2102
    &gt;&gt;&gt; Mint.present_year = 2177     # More time passes
    &gt;&gt;&gt; mint.create(Dime).worth()    # 10 cents + (75 &#x2d; 50 years)
    35
    &gt;&gt;&gt; Mint().create(Dime).worth()  # A new mint has the current year
    10
    &gt;&gt;&gt; dime.worth()     # 10 cents + (155 &#x2d; 50 years)
    115
    &gt;&gt;&gt; Dime.cents = 20  # Upgrade all dimes!
    &gt;&gt;&gt; dime.worth()     # 20 cents + (155 &#x2d; 50 years)
    125
    &quot;&quot;&quot;
    present_year = 2022

    def __init__(self):
        self.update()

    def create(self, coin):
<div class="sol-highlight">        return coin(self.year)</div>
    def update(self):
<div class="sol-highlight">        self.year = Mint.present_year</div>
class Coin:
    cents = None # will be provided by subclasses, but not by Coin itself

    def __init__(self, year):
        self.year = year

    def worth(self):
<div class="sol-highlight">        return self.cents + max(0, Mint.present_year &#x2d; self.year &#x2d; 50)</div>
class Nickel(Coin):
    cents = 5

class Dime(Coin):
    cents = 10</code></pre>

</solution>

<p>Use Ok to test your code:</p><pre style="margin-bottom:0;"><code class="nohighlight">python3 ok -q Mint<button id="copy-code-python3ok-qMint" class="inline-copy-button"><div class="copy-tooltip"><span>Copy</span></div>✂️</a></code></pre>
        <script>
        document.getElementById("copy-code-python3ok-qMint").onclick = () => copyCode('python3 ok -q Mint', "copy-code-python3ok-qMint");
        </script>
        <br/>


<h3 id="q2-vending-machine">Q2: Vending Machine</h3>


<p>In this question you'll create a <a href="https://en.wikipedia.org/wiki/Vending_machine">vending machine</a> that only outputs a single product and provides change when needed.</p>

<p>Create a class called <code>VendingMachine</code> that represents a vending
machine for some product. A <code>VendingMachine</code> object returns strings
describing its interactions. Remember to match <em>exactly</em> the strings in the doctests -- including punctuation and spacing!</p>

<p>Fill in the <code>VendingMachine</code> class, <em>adding attributes and methods as appropriate</em>, such that its behavior matches the following doctests:</p>

<solution>

<pre><code>class VendingMachine:
    &quot;&quot;&quot;A vending machine that vends some product for some price.

    &gt;&gt;&gt; v = VendingMachine(&#x27;candy&#x27;, 10)
    &gt;&gt;&gt; v.vend()
    &#x27;Nothing left to vend. Please restock.&#x27;
    &gt;&gt;&gt; v.add_funds(15)
    &#x27;Nothing left to vend. Please restock. Here is your $15.&#x27;
    &gt;&gt;&gt; v.restock(2)
    &#x27;Current candy stock: 2&#x27;
    &gt;&gt;&gt; v.vend()
    &#x27;Please add $10 more funds.&#x27;
    &gt;&gt;&gt; v.add_funds(7)
    &#x27;Current balance: $7&#x27;
    &gt;&gt;&gt; v.vend()
    &#x27;Please add $3 more funds.&#x27;
    &gt;&gt;&gt; v.add_funds(5)
    &#x27;Current balance: $12&#x27;
    &gt;&gt;&gt; v.vend()
    &#x27;Here is your candy and $2 change.&#x27;
    &gt;&gt;&gt; v.add_funds(10)
    &#x27;Current balance: $10&#x27;
    &gt;&gt;&gt; v.vend()
    &#x27;Here is your candy.&#x27;
    &gt;&gt;&gt; v.add_funds(15)
    &#x27;Nothing left to vend. Please restock. Here is your $15.&#x27;

    &gt;&gt;&gt; w = VendingMachine(&#x27;soda&#x27;, 2)
    &gt;&gt;&gt; w.restock(3)
    &#x27;Current soda stock: 3&#x27;
    &gt;&gt;&gt; w.restock(3)
    &#x27;Current soda stock: 6&#x27;
    &gt;&gt;&gt; w.add_funds(2)
    &#x27;Current balance: $2&#x27;
    &gt;&gt;&gt; w.vend()
    &#x27;Here is your soda.&#x27;
    &quot;&quot;&quot;
<div class="sol-highlight">    def __init__(self, product, price):
        self.product = product
        self.price = price
        self.stock = 0
        self.balance = 0

    def restock(self, n):
        self.stock += n
        return f&#x27;Current {self.product} stock: {self.stock}&#x27;

    def add_funds(self, n):
        if self.stock == 0:
            return f&#x27;Nothing left to vend. Please restock. Here is your ${n}.&#x27;
            # Alternatively, we could have:
            # return self.vend() + f&#x27; Here is your ${n}.&#x27;
        self.balance += n
        return f&#x27;Current balance: ${self.balance}&#x27;

    def vend(self):
        if self.stock == 0:
            return &#x27;Nothing left to vend. Please restock.&#x27;
        difference = self.price &#x2d; self.balance
        if difference &gt; 0:
            return f&#x27;Please add ${difference} more funds.&#x27;
        message = f&#x27;Here is your {self.product}&#x27;
        if difference != 0:
            message += f&#x27; and ${&#x2d;difference} change&#x27;
        self.balance = 0
        self.stock &#x2d;= 1
        return message + &#x27;.&#x27;</div></code></pre>

</solution>

<blockquote><p>You may find Python's formatted string literals, or <a href="https://docs.python.org/3/tutorial/inputoutput.html#fancier-output-formatting">f-strings</a> useful.
A quick example:</p>

<pre><code>&gt;&gt;&gt; feeling = &#x27;love&#x27;
&gt;&gt;&gt; course = &#x27;61A!&#x27;
&gt;&gt;&gt; f&#x27;I {feeling} {course}&#x27;
&#x27;I love 61A!&#x27;</code></pre></blockquote>

<p>Use Ok to test your code:</p><pre style="margin-bottom:0;"><code class="nohighlight">python3 ok -q VendingMachine<button id="copy-code-python3ok-qVendingMachine" class="inline-copy-button"><div class="copy-tooltip"><span>Copy</span></div>✂️</a></code></pre>
        <script>
        document.getElementById("copy-code-python3ok-qVendingMachine").onclick = () => copyCode('python3 ok -q VendingMachine', "copy-code-python3ok-qVendingMachine");
        </script>
        <br/>

<blockquote><p>If you're curious about alternate methods of string formatting, you can also check out an older method of <a href="https://docs.python.org/2/library/stdtypes.html#str.format">Python string formatting</a>.
A quick example:</p>

<pre><code>&gt;&gt;&gt; ten, twenty, thirty = 10, &#x27;twenty&#x27;, [30]
&gt;&gt;&gt; &#x27;{0} plus {1} is {2}&#x27;.format(ten, twenty, thirty)
&#x27;10 plus twenty is [30]&#x27;</code></pre></blockquote>

<div class="sol-highlight">

<p>Reading through the doctests, it should be clear which functions we should add
to ensure that the vending machine class behaves correctly.</p>

<p><code>__init__</code></p>

<ul>
  <li>This can be difficult to fill out at first. Both <code>product</code> and <code>price</code> seem
  pretty obvious to keep around, but <code>stock</code> and <code>balance</code> are quantities that
  are needed only after attempting other functions.</li>
</ul>

<p><code>restock</code></p>

<ul>
  <li>Even though <code>v.restock(2)</code> takes only one argument in the doctest, remember
  that <code>self</code> is bound to the object the <code>restock</code> method is invoked on.
  Therefore, this function has two parameters.</li>
  <li>While implementing this function, you will probably realize that you would
  like to keep track of the stock somewhere. While it might be possible to set
  the stock in this function as an instance attribute, it would lose whatever
  the old stock was.
  Therefore, the natural solution is to initialize stock in the constructor, and
  then update it in <code>restock</code>.</li>
</ul>

<p><code>add_funds</code></p>

<ul>
  <li>This behaves very similarly to <code>restock</code>. See comments above.</li>
  <li>Also yes, this is quite the expensive vending machine.</li>
</ul>

<p><code>vend</code></p>

<ul>
  <li><p>The trickiest thing here is to make sure we handle all the cases. You may find
  it helpful when implementing a problem like this to keep track of all the
  errors we run into in the doctest.</p>

  <ol>
    <li>No stock</li>
    <li>Not enough balance</li>
    <li>Leftover balance after purchase (return change to customer)</li>
    <li>No leftover balance after purchase</li>
  </ol></li>
  <li><p>We use some string concatenation at the end when handling case 3 and 4 to try
  and reduce the amount of code. This isn't necessary for correctness -- it's ok
  to have something like:</p>

<pre><code>if difference != 0:
    return ...
else:
    return ...</code></pre>

  <p>Of course, that would require decrementing the balance and stock beforehand.</p></li>
</ul>

</div>


<h2 id="election">Election</h2>


<p>Let's implement a game called Election. In this game, two players compete to try
and earn the most votes. Both players start with 0 votes and 100 popularity.</p>

<p>The two players alternate turns, and the first player starts. Each turn, the
current player chooses an action. There are two types of actions:</p>

<ul>
  <li>The player can debate, and either gain or lose 50 popularity. If the player
  has popularity <code>p1</code> and the other player has popularity <code>p2</code>, then the
  probability that the player gains 50 popularity is <code>max(0.1, p1 / (p1 + p2))</code>
  Note that the <code>max</code> causes the probability to never be lower than 0.1.</li>
  <li>The player can give a speech. If the player has popularity <code>p1</code> and the other
  player has popularity <code>p2</code>, then the player gains <code>p1 // 10</code> votes and
  popularity and the other player loses <code>p2 // 10</code> popularity.</li>
</ul>

<p>The game ends when a player reaches 50 votes, or after a total of 10 turns have
been played (each player has taken 5 turns). Whoever has more votes at the end
of the game is the winner!</p>


<h3 id="q3-player">Q3: Player</h3>


<p>First, let's implement the <code>Player</code> class. Fill in the <code>debate</code> and <code>speech</code>
methods, that take in another <code>Player</code> <code>other</code>, and implement the correct
behavior as detailed above. Here are two additional things to keep in mind:</p>

<ul>
  <li>In the <code>debate</code> method, you should call the provided <code>random</code> function, which
  returns a random float between 0 and 1. The player should gain 50 popularity if
  the random number is smaller than the probability described above, and lose 50
  popularity otherwise.</li>
  <li>Neither players' popularity should ever become negative. If this
  happens, set it equal to 0 instead.</li>
</ul>

<solution>

<pre><code>### Phase 1: The Player Class
class Player:
    &quot;&quot;&quot;
    &gt;&gt;&gt; random = make_test_random()
    &gt;&gt;&gt; p1 = Player(&#x27;Hill&#x27;)
    &gt;&gt;&gt; p2 = Player(&#x27;Don&#x27;)
    &gt;&gt;&gt; p1.popularity
    100
    &gt;&gt;&gt; p1.debate(p2)  # random() should return 0.0
    &gt;&gt;&gt; p1.popularity
    150
    &gt;&gt;&gt; p2.popularity
    100
    &gt;&gt;&gt; p2.votes
    0
    &gt;&gt;&gt; p2.speech(p1)
    &gt;&gt;&gt; p2.votes
    10
    &gt;&gt;&gt; p2.popularity
    110
    &gt;&gt;&gt; p1.popularity
    135

<div class="sol-highlight">
    &gt;&gt;&gt; # Additional correctness tests
    &gt;&gt;&gt; p1.speech(p2)
    &gt;&gt;&gt; p1.votes
    13
    &gt;&gt;&gt; p1.popularity
    148
    &gt;&gt;&gt; p2.votes
    10
    &gt;&gt;&gt; p2.popularity
    99
    &gt;&gt;&gt; for _ in range(4):  # 0.1, 0.2, 0.3, 0.4
    ...     p1.debate(p2)
    &gt;&gt;&gt; p2.debate(p1)
    &gt;&gt;&gt; p2.popularity
    49
    &gt;&gt;&gt; p2.debate(p1)
    &gt;&gt;&gt; p2.popularity
    0
</div>    &quot;&quot;&quot;
    def __init__(self, name):
        self.name = name
        self.votes = 0
        self.popularity = 100

    def debate(self, other):
<div class="sol-highlight">        prob = max(0.1, self.popularity / (self.popularity + other.popularity))
        if random() &lt; prob:
            self.popularity += 50
        else:
            self.popularity = max(0, self.popularity &#x2d; 50)</div>
    def speech(self, other):
<div class="sol-highlight">        self.votes += self.popularity // 10
        self.popularity += self.popularity // 10
        other.popularity &#x2d;= other.popularity // 10</div>
    def choose(self, other):
        return self.speech</code></pre>

</solution>

<p>Use Ok to test your code:</p><pre style="margin-bottom:0;"><code class="nohighlight">python3 ok -q Player<button id="copy-code-python3ok-qPlayer" class="inline-copy-button"><div class="copy-tooltip"><span>Copy</span></div>✂️</a></code></pre>
        <script>
        document.getElementById("copy-code-python3ok-qPlayer").onclick = () => copyCode('python3 ok -q Player', "copy-code-python3ok-qPlayer");
        </script>
        <br/>


<h3 id="q4-game">Q4: Game</h3>


<p>Now, implement the <code>Game</code> class. Fill in the <code>play</code> method, which should
alternate between the two players, starting with <code>p1</code>, and have each player take
one turn at a time. The <code>choose</code> method in the <code>Player</code> class returns the
method, either <code>debate</code> or <code>speech</code>, that should be called to perform the
action.</p>

<p>In addition, fill in the <code>winner</code> method, which should return the
player with more votes, or <code>None</code> if the players are tied.</p>

<solution>

<pre><code>### Phase 2: The Game Class
class Game:
    &quot;&quot;&quot;
    &gt;&gt;&gt; p1, p2 = Player(&#x27;Hill&#x27;), Player(&#x27;Don&#x27;)
    &gt;&gt;&gt; g = Game(p1, p2)
    &gt;&gt;&gt; winner = g.play()
    &gt;&gt;&gt; p1 is winner
    True

<div class="sol-highlight">
    &gt;&gt;&gt; # Additional correctness tests
    &gt;&gt;&gt; winner is g.winner()
    True
    &gt;&gt;&gt; g.turn
    10
    &gt;&gt;&gt; p1.votes = p2.votes
    &gt;&gt;&gt; print(g.winner())
    None
</div>    &quot;&quot;&quot;
    def __init__(self, player1, player2):
        self.p1 = player1
        self.p2 = player2
        self.turn = 0

    def play(self):
        while not self.game_over():
<div class="sol-highlight">            if self.turn % 2 == 0:
                curr, other = self.p1, self.p2
            else:
                curr, other = self.p2, self.p1
            curr.choose(other)(other)
            self.turn += 1</div>        return self.winner()

    def game_over(self):
        return max(self.p1.votes, self.p2.votes) &gt;= 50 or self.turn &gt;= 10

    def winner(self):
<div class="sol-highlight">        if self.p1.votes &gt; self.p2.votes:
            return self.p1
        elif self.p2.votes &gt; self.p1.votes:
            return self.p2
        else:
            return None</div></code></pre>

</solution>

<p>Use Ok to test your code:</p><pre style="margin-bottom:0;"><code class="nohighlight">python3 ok -q Game<button id="copy-code-python3ok-qGame" class="inline-copy-button"><div class="copy-tooltip"><span>Copy</span></div>✂️</a></code></pre>
        <script>
        document.getElementById("copy-code-python3ok-qGame").onclick = () => copyCode('python3 ok -q Game', "copy-code-python3ok-qGame");
        </script>
        <br/>


<h3 id="q5-new-players">Q5: New Players</h3>


<p>The <code>choose</code> method in the <code>Player</code> class is boring, because it always returns
the <code>speech</code> method. Let's implement two new classes that inherit from <code>Player</code>,
but have more interesting <code>choose</code> methods.</p>

<p>Implement the <code>choose</code> method in the <code>AggressivePlayer</code> class, which returns the
<code>debate</code> method if the player's popularity is less than or equal to <code>other</code>'s
popularity, and <code>speech</code> otherwise. Also implement the <code>choose</code> method in the
<code>CautiousPlayer</code> class, which returns the <code>debate</code> method if the player's
popularity is 0, and <code>speech</code> otherwise.</p>

<solution>

<pre><code>### Phase 3: New Players
class AggressivePlayer(Player):
    &quot;&quot;&quot;
    &gt;&gt;&gt; random = make_test_random()
    &gt;&gt;&gt; p1, p2 = AggressivePlayer(&#x27;Don&#x27;), Player(&#x27;Hill&#x27;)
    &gt;&gt;&gt; g = Game(p1, p2)
    &gt;&gt;&gt; winner = g.play()
    &gt;&gt;&gt; p1 is winner
    True

<div class="sol-highlight">
    &gt;&gt;&gt; # Additional correctness tests
    &gt;&gt;&gt; p1.popularity = p2.popularity
    &gt;&gt;&gt; p1.choose(p2) == p1.debate
    True
    &gt;&gt;&gt; p1.popularity += 1
    &gt;&gt;&gt; p1.choose(p2) == p1.debate
    False
    &gt;&gt;&gt; p2.choose(p1) == p2.speech
    True
</div>    &quot;&quot;&quot;
    def choose(self, other):
<div class="sol-highlight">        if self.popularity &lt;= other.popularity:
            return self.debate
        else:
            return self.speech</div>
class CautiousPlayer(Player):
    &quot;&quot;&quot;
    &gt;&gt;&gt; random = make_test_random()
    &gt;&gt;&gt; p1, p2 = CautiousPlayer(&#x27;Hill&#x27;), AggressivePlayer(&#x27;Don&#x27;)
    &gt;&gt;&gt; p1.popularity = 0
    &gt;&gt;&gt; p1.choose(p2) == p1.debate
    True
    &gt;&gt;&gt; p1.popularity = 1
    &gt;&gt;&gt; p1.choose(p2) == p1.debate
    False

<div class="sol-highlight">
    &gt;&gt;&gt; # Additional correctness tests
    &gt;&gt;&gt; p2.choose(p1) == p2.speech
    True
</div>    &quot;&quot;&quot;
    def choose(self, other):
<div class="sol-highlight">        if self.popularity == 0:
            return self.debate
        else:
            return self.speech</div></code></pre>

</solution>

<p>Use Ok to test your code:</p><pre style="margin-bottom:0;"><code class="nohighlight">python3 ok -q AggressivePlayer
python3 ok -q CautiousPlayer<button id="copy-code-python3ok-qAggressivePlayerpython3ok-qCautiousPlayer" class="inline-copy-button"><div class="copy-tooltip"><span>Copy</span></div>✂️</a></code></pre>
        <script>
        document.getElementById("copy-code-python3ok-qAggressivePlayerpython3ok-qCautiousPlayer").onclick = () => copyCode('python3 ok -q AggressivePlayer\npython3 ok -q CautiousPlayer', "copy-code-python3ok-qAggressivePlayerpython3ok-qCautiousPlayer");
        </script>
        <br/>


<h2 id="submit">Submit</h2>

<p>Make sure to submit this assignment by uploading any files you've edited <strong>to the appropriate Gradescope assignment.</strong> For a refresher on how to do this, refer to <a href="../../lab/lab00.1.html#submit-with-gradescope">Lab 00</a>.</p>


<h1 id="optional-questions">Optional Questions</h1>



<h3 id="q6-next-virahanka-fibonacci-object">Q6: Next Virahanka Fibonacci Object</h3>


<p>Implement the <code>next</code> method of the <code>VirFib</code> class. For this class, the <code>value</code>
attribute is a Fibonacci number. The <code>next</code> method returns a <code>VirFib</code> instance
whose <code>value</code> is the next Fibonacci number. The <code>next</code> method should take only
constant time.</p>

<p>Note that in the doctests, nothing is being printed out. Rather, each call to
<code>.next()</code> returns a <code>VirFib</code> instance. The way each <code>VirFib</code> instance is displayed is
determined by the return value of its <code>__repr__</code> method.</p>

<blockquote><p><em>Hint</em>: Keep track of the previous number by setting a new instance attribute
inside <code>next</code>. You can create new instance attributes for objects at any point,
even outside the <code>__init__</code> method.</p></blockquote>

<solution>

<pre><code>class VirFib():
    &quot;&quot;&quot;A Virahanka Fibonacci number.

    &gt;&gt;&gt; start = VirFib()
    &gt;&gt;&gt; start
    VirFib object, value 0
    &gt;&gt;&gt; start.next()
    VirFib object, value 1
    &gt;&gt;&gt; start.next().next()
    VirFib object, value 1
    &gt;&gt;&gt; start.next().next().next()
    VirFib object, value 2
    &gt;&gt;&gt; start.next().next().next().next()
    VirFib object, value 3
    &gt;&gt;&gt; start.next().next().next().next().next()
    VirFib object, value 5
    &gt;&gt;&gt; start.next().next().next().next().next().next()
    VirFib object, value 8
    &gt;&gt;&gt; start.next().next().next().next().next().next() # Ensure start isn&#x27;t changed
    VirFib object, value 8
    &quot;&quot;&quot;

    def __init__(self, value=0):
        self.value = value

    def next(self):
<div class="sol-highlight">        if self.value == 0:
            result = VirFib(1)
        else:
            result = VirFib(self.value + self.previous)
        result.previous = self.value
        return result</div>
    def __repr__(self):
        return &quot;VirFib object, value &quot; + str(self.value)</code></pre>

</solution>

<p>Use Ok to test your code:</p><pre style="margin-bottom:0;"><code class="nohighlight">python3 ok -q VirFib<button id="copy-code-python3ok-qVirFib" class="inline-copy-button"><div class="copy-tooltip"><span>Copy</span></div>✂️</a></code></pre>
        <script>
        document.getElementById("copy-code-python3ok-qVirFib").onclick = () => copyCode('python3 ok -q VirFib', "copy-code-python3ok-qVirFib");
        </script>
        <br/>

<div class="sol-highlight">

<p>Remember that <code>next</code> must return a <code>VirFib</code> object! With this in mind, our
first goal is to calculate the next <code>VirFib</code> object and return it. One
approach is to figure out the base case (<code>self.value == 0</code>) and then decide what
information is needed for the following call to <code>next</code>.</p>

<p>You might also note that storing the current value makes the solution look very
similar to the iterative version of the <code>virfib</code> problem.</p>

</div>


<h1 id="exam-practice">Exam Practice</h1>


<p>Homework assignments will also contain prior exam questions for you to try.
These questions have no submission component; feel free to attempt them if you'd like some practice!</p>

<p>Object-Oriented Programming</p>

<ol>
  <li>Spring 2022 MT2 Q8: <a href="../../exam/sp22/mt2/61a-sp22-mt2.pdf#page=17">CS61A Presents The Game of Hoop.</a></li>
  <li>Fall 2020 MT2 Q3: <a href="../../exam/fa20/mt2/61a-fa20-mt2.pdf#page=9">Sparse Lists</a></li>
  <li>Fall 2019 MT2 Q7: <a href="../../exam/fa19/mt2/61a-fa19-mt2.pdf#page=8">Version 2.0</a></li>
</ol>

  </div>

  <div class='col-md-3 sticky'>
    <nav class='hidden-print hidden-sm hidden-xs sidebar'>
      <ul>
  <li><a href="index.html#required-questions">Required Questions</a></li>
  <ul>
    <li><a href="index.html#getting-started-videos">Getting Started Videos</a></li>
    <li><a href="index.html#oop">OOP</a></li>
    <ul>
      <li><a href="index.html#q1-mint">Q1: Mint</a></li>
      <li><a href="index.html#q2-vending-machine">Q2: Vending Machine</a></li>
    </ul>
    <li><a href="index.html#election">Election</a></li>
    <ul>
      <li><a href="index.html#q3-player">Q3: Player</a></li>
      <li><a href="index.html#q4-game">Q4: Game</a></li>
      <li><a href="index.html#q5-new-players">Q5: New Players</a></li>
    </ul>
    <li><a href="index.html#submit">Submit</a></li>
  </ul>
  <li><a href="index.html#optional-questions">Optional Questions</a></li>
  <ul>
    <li><a href="index.html#q6-next-virahanka-fibonacci-object">Q6: Next Virahanka Fibonacci Object</a></li>
  </ul>
  <li><a href="index.html#exam-practice">Exam Practice</a></li>
</ul>
    </nav>
  </div>
</div>

    </main>

    <footer class="container">
      <div class="row text-center">
        <div class="col col-sm-4">
          <h3><a href="../../index.html">CS 61A</a></h3>
          <ul class="nav nav-pills nav-stacked">
            <li><a href="../../weekly.html">Weekly Schedule</a></li>
            <li><a href="../../office-hours.html">Office Hours</a></li>
            <li><a href="../../staff.html">Staff</a></li>
          </ul>
        </div>
        <div class="col col-sm-4">
          <h3><a href="../../resources.1.html">Resources</a></h3>
          <ul class="nav nav-pills nav-stacked">
            <li><a href="../../articles/studying.html">Studying Guide</a></li>
            <li><a href="../../articles/debugging.html">Debugging Guide</a></li>
            <li><a href="../../articles/composition.html">Composition Guide</a></li>
            <li><a href="../../articles/pair-programming.html">Pair Programming</a></li>
          </ul>
        </div>
        <div class="col col-sm-4">
          <h3><a href="../../articles/about.html">Policies</a></h3>
          <ul class="nav nav-pills nav-stacked">
            <li><a href="../../articles/about.html#assignments">Assignments</a></li>
            <li><a href="../../articles/about.html#exams">Exams</a></li>
            <li><a href="../../articles/about.html#grading">Grading</a></li>
          </ul>
        </div>
      </div>
    </footer>

    

    <script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.20.0/min/vs/loader.min.js"></script>
  <link rel="stylesheet" data-name="vs/editor/editor.main" href="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.20.0/min/vs/editor/editor.main.min.css">
  <script>
      require.config({ paths: { 'vs': 'https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.20.0/min/vs' }});
      window.MonacoEnvironment = { getWorkerUrl: () => URL.createObjectURL(new Blob([`
      self.MonacoEnvironment = {
          baseUrl: 'https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.20.0/min'
      };
      importScripts('https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.20.0/min/vs/base/worker/workerMain.min.js');
  `], { type: 'text/javascript' }))
  };
  </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jsPlumb/2.15.5/js/jsplumb.min.js"></script>
    <script src="../../assets/js/network_storage.js"></script>
    <script src="../../assets/js/storable.js"></script>
    <script src="../../assets/js/editor.js"></script>
    <script src="../../assets/js/copy-button.js"></script>
    <script src="../../assets/js/env-diagram.js"></script>
    
<script src="../../assets/js/sketchy.js"></script>
<script>
  $('.sidebar ul').addClass('nav nav-stacked noselect');
  $('body').scrollspy({
    target: '.sidebar',
    offset: 40
  });

  function goToId(id) {
    var target = $(id);
    target.parent().show();
    $('html,body').animate({
      scrollTop: target.offset().top,
    }, 100);
    $("body").scrollspy('refresh');
  }

  if (location.hash) {
    setTimeout(function() {
      if (location.hash) {
        goToId(location.hash);
      }
    }, 1);
  }

  $("a").click(function(event) {
    var urlBeforeHashRegEx = new RegExp("^"+window.location.href.split("#")[0]);
    if (/^#/.test(this.hash) && urlBeforeHashRegEx.test(this.href)) {
      event.preventDefault();
      goToId(this.hash);
      document.location.hash = this.hash;
    }
  });
</script>

  </body>
</html>
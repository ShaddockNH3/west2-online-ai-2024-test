
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta name="description" content ="CS 61A: Structure and Interpretation of Computer Programs" />
    <meta name="keywords" content ="CS 61A, Computer Science, CS, 61A, Programming, John DeNero, Berkeley, EECS" />
    <meta name="author" content ="John DeNero, Hany Farid" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="viewport" content="width=device-width">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-throttle-debounce/1.1/jquery.ba-throttle-debounce.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="../../assets/js/hl.js"></script>
    <script src="../../assets/js/toggledarkmode.js"></script>
    <script>
        // we aren't registering builtins since
        //      (1) they don't render differently in the current CSS from other names
        //      (2) it's a mess to list all of them. You can extract from the site but that takes effort
        // if (1) ceases to be true, (2) might be worth the effort. For now, we're leaving as is
        hljsRegister({
            'keyword': "define if cond and or let begin lambda mu quote delay cons-stream set! quasiquote unquote unquote-splicing define-macro"
        });
        hljs.initHighlightingOnLoad();
    </script>
    <script src="../../assets/js/dark-mode.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inconsolata|Roboto:300,400,500|Work+Sans:400,700">
    <link rel="stylesheet" href="../../assets/css/style.css">
    <link rel="stylesheet" href="../../assets/css/mono-blue.css">
    <link rel="icon" href="../../assets/images/favicon.ico">

    

<link rel="stylesheet" type="text/css" href="../../assets/css/lab.css">


    <title>
Lab 9 Solutions | CS 61A Spring 2023
</title>
  </head>

  <body id="index" class="home">
    <nav class="navbar navbar-default navbar-static-top">
      <div class="container noselect">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse-section">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="../../index.html">
            <img style="max-width:60px; margin-top: -20px;" class="logo" src="../../assets/images/logo.png"/>
          </a>
        </div>

        <div class="collapse navbar-collapse" id="navbar-collapse-section">
          <ul class="nav navbar-nav navbar-right">
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="index.html#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Calendar
                <span class="caret"></span>
              </a>
              <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                <li><a href="../../weekly.html">Weekly Schedule</a></li>
                <li><a href="../../office-hours.html">Office Hours</a></li>
              </ul>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="index.html#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Links
                <span class="caret"></span>
              </a>
              <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                <li><a href="https://sections.cs61a.org">Sections Tool</a></li>
                <li><a href="https://oh.cs61a.org">Office Hours Queue</a></li>
                <li><a href="https://go.cs61a.org/regrade-request">Request a Regrade</a></li>
              </ul>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="index.html#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Staff
                <span class="caret"></span>
              </a>
              <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                <li><a href="../../instructor.html">Instructors</a></li>
                <li><a href="../../TAs.html">TAs</a></li>
                <li><a href="../../tutors.html">Tutors</a></li>
                <li><a href="../../academic-interns.html">Academic Interns</a></li>
              </ul>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="index.html#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Resources
                <span class="caret"></span>
              </a>
              <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                <li><a href="https://go.cs61a.org/extensions">Request an Extension</a></li>
                <li><a href="https://go.cs61a.org/accommodation-appts">Book an Accommodations Appointment</a></li>
                <li><a href="../../resources.1.html">Topical Resources + Past Exams</a></li>
                <li><a href="https://tutor.cs61a.org/">PythonTutor</a></li>
                <li><a href="https://code.cs61a.org/">Code</a></li>
                <li><a href="https://edstem.org/us/courses/34756/discussion/" target="_blank">Ed</a></li>
                <li><a href="../../articles/campus-res/index.html">Department/Campus Resources</a></li>
              </ul>
            </li>
            <li><a href="../../articles/about.html">Syllabus</a></li>
            <li><a href="../../contact.1.html">Contact</a></li>
            <li>
              <label class="switch">
                <input type="checkbox" id="toggle-mode-cb">
                <span class="slider round"></span>
              </label>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <main id="content" class="container">
      
<div class='row'>
  <div class='col-md-9'>
    <header>
      <h1>
        
Lab 9 Solutions

        
        
        <ul class="inline-block list-inline">
          <li><a href="lab09.zip" class="label label-outline">lab09.zip</a></li>
        </ul>
        
        
      </h1>
    </header>
    
<h2>Solution Files</h2>


    
<h1 id="topics">Topics</h1>


<p>Consult this section if you need a refresher on the material for this lab. It's
okay to skip directly to <a href="index.html#required-questions">the questions</a> and refer back
here should you get stuck.</p>

<br>

        <button id='toggle-1' class='btn btn-outline btn-lg alwaystoggle toggle'>
        Mutable Trees<noscript> (enable JavaScript)</noscript>
        </button>
        <div class="solution toggle-1">

<h2 id="mutable-trees">Mutable Trees</h2>

<p>We define a tree to be a recursive data abstraction that has a <code>label</code> (the
value stored in the root of the tree) and <code>branches</code> (a list of trees directly
underneath the root).</p>

<p>Previously we implemented trees by using a functional data abstraction, with the <code>tree</code> constructor function and the <code>label</code> and <code>branches</code> selector functions. Now we implement trees by creating the <code>Tree</code> class. Here is part of the class included in the lab.</p>

<pre><code>class Tree:
    &quot;&quot;&quot;
    &gt;&gt;&gt; t = Tree(3, [Tree(2, [Tree(5)]), Tree(4)])
    &gt;&gt;&gt; t.label
    3
    &gt;&gt;&gt; t.branches[0].label
    2
    &gt;&gt;&gt; t.branches[1].is_leaf()
    True
    &quot;&quot;&quot;
    def __init__(self, label, branches=[]):
        for b in branches:
            assert isinstance(b, Tree)
        self.label = label
        self.branches = list(branches)

    def is_leaf(self):
        return not self.branches</code></pre>

<p>Even though this is a new implementation, everything we know about the functional tree data abstraction
remains true.  That means that solving problems involving trees as objects uses
the same techniques that we developed when first studying the functional tree data abstraction (e.g. we
can still use recursion on the branches!).  <strong>The main difference, aside from syntax, is that tree objects are mutable.</strong></p>

<p>Here is a summary of the differences between the tree data abstraction implemented as a functional abstraction vs. implemented as class:</p>




        <div class="table-responsive">
          <table class="table table-bordered">
          
  <tr>
    <th>-</th>
    <th>Tree constructor and selector functions</th>
    <th>Tree class</th>
  </tr>
  <tr>
    <td>Constructing a tree</td>
    <td>To construct a tree given a <code>label</code> and a list of <code>branches</code>, we call <code>tree(label, branches)</code></td>
    <td>To construct a tree object given a <code>label</code> and a list of <code>branches</code>, we call <code>Tree(label, branches)</code> (which calls the <code>Tree.__init__</code> method).</td>
  </tr>
  <tr>
    <td>Label and branches</td>
    <td>To get the label or branches of a tree <code>t</code>, we call <code>label(t)</code> or <code>branches(t)</code> respectively</td>
    <td>To get the label or branches of a tree <code>t</code>, we access the instance attributes <code>t.label</code> or <code>t.branches</code> respectively.</td>
  </tr>
  <tr>
    <td>Mutability</td>
    <td>The functional tree data abstraction is immutable because we cannot assign values to call expressions</td>
    <td>The <code>label</code> and <code>branches</code> attributes of a <code>Tree</code> instance can be reassigned, mutating the tree.</td>
  </tr>
  <tr>
    <td>Checking if a tree is a leaf</td>
    <td>To check whether a tree <code>t</code> is a leaf, we call the convenience function <code>is_leaf(t)</code></td>
    <td>To check whether a tree <code>t</code> is a leaf, we call the bound method <code>t.is_leaf()</code>. This method can only be called on <code>Tree</code> objects.</td>
  </tr>

          </table>
        </div>
        


</div>
<br>

<br>

        <button id='toggle-2' class='btn btn-outline btn-lg alwaystoggle toggle'>
        Efficiency (Orders of Growth)<noscript> (enable JavaScript)</noscript>
        </button>
        <div class="solution toggle-2">

<h2 id="efficiency-orders-of-growth">Efficiency (Orders of Growth)</h2>

<guide>
The most important thing to remember about efficiency is that <strong>tricky examples are 61B topics, not 61A topics</strong>. In addition to classifying algorithms as Exponential, Quadratic, Linear, Logarithmic, or Constant, we also introduce Big Theta notation, but do not go into the details of runtime analysis.
</guide>

<p>When we talk about the efficiency of a function, we are often interested in the
following: as the size of the input grows, how does the runtime of the function
change? And what do we mean by <em>runtime</em>?</p>

<p><strong>Example 1:</strong> <code>square(1)</code> requires one primitive operation: multiplication.
<code>square(100)</code> also requires one. No matter what input <code>n</code> we pass into <code>square</code>, it always takes a <em>constant</em> number of operations (1). In other words, this function has a runtime complexity of Θ(1).</p>

<p>As an illustration, check out the table below:</p>




        <div class="table-responsive">
          <table class="table table-bordered">
          
  <tr>
    <th>input</th>
    <th>function call</th>
    <th>return value</th>
    <th>operations</th>
  </tr>
  <tr>
    <td>1</td>
    <td><code>square(1)</code></td>
    <td>1*1</td>
    <td>1</td>
  </tr>
  <tr>
    <td>2</td>
    <td><code>square(2)</code></td>
    <td>2*2</td>
    <td>1</td>
  </tr>
  <tr>
    <td>...</td>
    <td>...</td>
    <td>...</td>
    <td>...</td>
  </tr>
  <tr>
    <td>100</td>
    <td><code>square(100)</code></td>
    <td>100*100</td>
    <td>1</td>
  </tr>
  <tr>
    <td>...</td>
    <td>...</td>
    <td>...</td>
    <td>...</td>
  </tr>
  <tr>
    <td>n</td>
    <td><code>square(n)</code></td>
    <td>n*n</td>
    <td>1</td>
  </tr>

          </table>
        </div>
        



<p><strong>Example 2:</strong> <code>factorial(1)</code> requires one multiplication, but <code>factorial(100)</code> requires 100 multiplications. As we increase the input size of n, the runtime (number of operations) increases <strong>linearly</strong> proportional to the input. In other words, this function has a runtime complexity of Θ(<code>n</code>).</p>

<p>As an illustration, check out the table below:</p>




        <div class="table-responsive">
          <table class="table table-bordered">
          
  <tr>
    <th>input</th>
    <th>function call</th>
    <th>return value</th>
    <th>operations</th>
  </tr>
  <tr>
    <td>1</td>
    <td><code>factorial(1)</code></td>
    <td>1*1</td>
    <td>1</td>
  </tr>
  <tr>
    <td>2</td>
    <td><code>factorial(2)</code></td>
    <td>2*1*1</td>
    <td>2</td>
  </tr>
  <tr>
    <td>...</td>
    <td>...</td>
    <td>...</td>
    <td>...</td>
  </tr>
  <tr>
    <td>100</td>
    <td><code>factorial(100)</code></td>
    <td>100*99*...*1*1</td>
    <td>100</td>
  </tr>
  <tr>
    <td>...</td>
    <td>...</td>
    <td>...</td>
    <td>...</td>
  </tr>
  <tr>
    <td>n</td>
    <td><code>factorial(n)</code></td>
    <td>n*(n-1)*...*1*1</td>
    <td>n</td>
  </tr>

          </table>
        </div>
        



<p><strong>Example 3:</strong> Consider the following function:</p>

<pre><code>def bar(n):
    for a in range(n):
        for b in range(n):
            print(a,b)</code></pre>

<p><code>bar(1)</code> requires 1 print statements, while <code>bar(100)</code> requires <code>100*100 = 10000</code> print statements (each time <code>a</code> increments, we have 100 print statements due to the inner for loop). Thus, the runtime increases <strong>quadratically</strong> proportional to the input. In other words, this function has a runtime complexity of Θ(<code>n^2</code>).</p>




        <div class="table-responsive">
          <table class="table table-bordered">
          
  <tr>
    <th>input</th>
    <th>function call</th>
    <th>operations (prints)</th>
  </tr>
  <tr>
    <td>1</td>
    <td><code>bar(1)</code></td>
    <td>1</td>
  </tr>
  <tr>
    <td>2</td>
    <td><code>bar(2)</code></td>
    <td>4</td>
  </tr>
  <tr>
    <td>...</td>
    <td>...</td>
    <td>...</td>
  </tr>
  <tr>
    <td>100</td>
    <td><code>bar(100)</code></td>
    <td>10000</td>
  </tr>
  <tr>
    <td>...</td>
    <td>...</td>
    <td>...</td>
  </tr>
  <tr>
    <td>n</td>
    <td><code>bar(n)</code></td>
    <td>n^2</td>
  </tr>

          </table>
        </div>
        



<p><strong>Example 4:</strong> Consder the following function:</p>

<pre><code>def rec(n):
    if n == 0:
        return 1
    else:
        return rec(n &#x2d; 1) + rec(n &#x2d; 1)</code></pre>

<p><code>rec(1)</code> requires one addition, as it returns <code>rec(0) + rec(0)</code>, and <code>rec(0)</code> hits the base case and requires no further additions. but <code>rec(4)</code> requires <code>2^4 &#x2d; 1</code> = 15 additions. To further understand the intuition, we can take a look at the recurisve tree below. To get <code>rec(4)</code>, we need one addition. We have two calls to <code>rec(3)</code>, which each require one addition, so this level needs two additions. Then we have four calls to <code>rec(2)</code>, so this level requires four additions, and so on down the tree. In total, this adds up to 1 + 2 + 4 + 8 = 15 additions.</p>

<p><img class="img-responsive center-block" src="assets/rec.png" alt="Recursive Call Tree" title="Rec Tree" width="" height=""></p>

<p>As we increase the input size of n, the runtime (number of operations) increases <strong>exponentially</strong> proportional to the input. In other words, this function has a runtime complexity of Θ(<code>2^n</code>).</p>

<p>As an illustration, check out the table below:</p>




        <div class="table-responsive">
          <table class="table table-bordered">
          
  <tr>
    <th>input</th>
    <th>function call</th>
    <th>return value</th>
    <th>operations</th>
  </tr>
  <tr>
    <td>1</td>
    <td><code>rec(1)</code></td>
    <td>2</td>
    <td>1</td>
  </tr>
  <tr>
    <td>2</td>
    <td><code>rec(2)</code></td>
    <td>4</td>
    <td>3</td>
  </tr>
  <tr>
    <td>...</td>
    <td>...</td>
    <td>...</td>
    <td>...</td>
  </tr>
  <tr>
    <td>10</td>
    <td><code>rec(10)</code></td>
    <td>1024</td>
    <td>1023</td>
  </tr>
  <tr>
    <td>...</td>
    <td>...</td>
    <td>...</td>
    <td>...</td>
  </tr>
  <tr>
    <td>n</td>
    <td><code>rec(n)</code></td>
    <td><code>2^n</code></td>
    <td><code>2^n</code></td>
  </tr>

          </table>
        </div>
        



<p>Here are some general guidelines for finding the order of growth for the
runtime of a function:</p>

<ul>
  <li><p>If the function is recursive or iterative, you can subdivide the problem
  as seen above:</p>

  <ul>
    <li>Count the number of recursive calls/iterations that will be made in terms of input size <code>n</code>.</li>
    <li>Find how much work is done per recursive call or iteration in terms of input size <code>n</code>.</li>
    <li>The answer is usually the product of the above two, but be sure to pay
    attention to control flow!</li>
  </ul></li>
  <li>If the function calls helper functions that are not constant-time, you need to take the runtime of the helper functions into consideration.</li>
  <li>We can ignore constant factors. For example <code>1000000n</code> and <code>n</code> steps are both linear.</li>
  <li>We can also ignore smaller factors. For example if <code>h</code> calls <code>f</code> and <code>g</code>, and <code>f</code> is Quadratic while <code>g</code> is linear, then <code>h</code> is Quadratic.</li>
  <li><p>For the purposes of this class, we take a fairly coarse view of efficiency. All the problems we cover in this course can be grouped as one of the following:</p>

  <ul>
    <li>Constant: the amount of time does not change based on the input size. Rule: <code>n &#x2d;&#x2d;&gt; 2n</code> means <code>t &#x2d;&#x2d;&gt; t</code>.</li>
    <li>Logarithmic: the amount of time changes based on the logarithm of the input size. Rule: <code>n &#x2d;&#x2d;&gt; 2n</code> means <code>t &#x2d;&#x2d;&gt; t + k</code>.</li>
    <li>Linear: the amount of time changes with direct proportion to the size of the input. Rule: <code>n &#x2d;&#x2d;&gt; 2n</code> means <code>t &#x2d;&#x2d;&gt; 2t</code>.</li>
    <li>Quadratic: the amount of time changes based on the square of the input size. Rule: <code>n &#x2d;&#x2d;&gt; 2n</code> means <code>t &#x2d;&#x2d;&gt; 4t</code>.</li>
    <li>Exponential: the amount of time changes with a power of the input size. Rule: <code>n &#x2d;&#x2d;&gt; n + 1</code> means <code>t &#x2d;&#x2d;&gt; 2t</code>.
    </div>
    <br></li>
  </ul></li>
</ul>


<h1 id="required-questions">Required Questions</h1>


<br>

        <button id='toggle-3' class='btn btn-outline btn-lg alwaystoggle toggle'>
        Getting Started Videos<noscript> (enable JavaScript)</noscript>
        </button>
        <div class="solution toggle-3">

<h2 id="getting-started-videos">Getting Started Videos</h2>


<p>These videos may provide some helpful direction for tackling the coding
problems on this assignment.</p>

<blockquote><p>To see these videos, you should be logged into your berkeley.edu email.</p></blockquote>


            <iframe width="560" height="315" src="https://youtube.com/embed/videoseries?list=PLx38hZJ5RLZc9sfZmJfMdcOZPHbwWeHCM"
                frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"
                allowfullscreen></iframe><p><a href='https://youtu.be/playlist?list=PLx38hZJ5RLZc9sfZmJfMdcOZPHbwWeHCM'> YouTube link </a></p>
</div>


<h2 id="trees">Trees</h2>



<h3 id="q1-wwpd-trees">Q1: WWPD: Trees</h3>


<p>Read over the <code>Tree</code> class in <code>lab09.py</code>. Make sure you understand the
doctests.</p>

<blockquote><p>Use Ok to test your knowledge with the following "What Would Python Display?"
questions:</p>

<pre><code>python3 ok &#x2d;q trees&#x2d;wwpd &#x2d;u</code></pre>

<p>Enter <code>Function</code> if you believe the answer is <code>&lt;function ...&gt;</code>, <code>Error</code> if it
errors, and <code>Nothing</code> if nothing is displayed. Recall that <code>Tree</code> instances
will be displayed the same way they are constructed.</p></blockquote>

<pre><code>&gt;&gt;&gt; from lab09 import *
&gt;&gt;&gt; t = Tree(1, Tree(2))
<div class="alt prompt-1">______</div><div class="solution prompt-1">&#x45;&#x72;&#x72;&#x6f;&#x72;</div>
&gt;&gt;&gt; t = Tree(1, [Tree(2)])
&gt;&gt;&gt; t.label
<div class="alt prompt-1">______</div><div class="solution prompt-1">&#x31;</div>
&gt;&gt;&gt; t.branches[0]
<div class="alt prompt-1">______</div><div class="solution prompt-1">&#x54;&#x72;&#x65;&#x65;&#x28;&#x32;&#x29;</div>
&gt;&gt;&gt; t.branches[0].label
<div class="alt prompt-1">______</div><div class="solution prompt-1">&#x32;</div>
&gt;&gt;&gt; t.label = t.branches[0].label
&gt;&gt;&gt; t
<div class="alt prompt-1">______</div><div class="solution prompt-1">&#x54;&#x72;&#x65;&#x65;&#x28;&#x32;&#x2c;&#x20;&#x5b;&#x54;&#x72;&#x65;&#x65;&#x28;&#x32;&#x29;&#x5d;&#x29;</div>
&gt;&gt;&gt; t.branches.append(Tree(4, [Tree(8)]))
&gt;&gt;&gt; len(t.branches)
<div class="alt prompt-1">______</div><div class="solution prompt-1">&#x32;</div>
&gt;&gt;&gt; t.branches[0]
<div class="alt prompt-1">______</div><div class="solution prompt-1">&#x54;&#x72;&#x65;&#x65;&#x28;&#x32;&#x29;</div>
&gt;&gt;&gt; t.branches[1]
<div class="alt prompt-1">______</div><div class="solution prompt-1">&#x54;&#x72;&#x65;&#x65;&#x28;&#x34;&#x2c;&#x20;&#x5b;&#x54;&#x72;&#x65;&#x65;&#x28;&#x38;&#x29;&#x5d;&#x29;</div></code></pre>
        <button id='prompt-1' class='btn btn-outline btn-lg solutiontoggle prompt'>
        Toggle Solution<noscript> (enable JavaScript)</noscript>
        </button>
        


<h3 id="q2-make-even">Q2: Make Even</h3>


<p>Define a function <code>make_even</code> which takes in a tree
<code>t</code> whose values are integers, and mutates the tree such that all the
odd integers are increased by 1 and all the even integers remain the same.</p>

<solution>

<pre><code>def make_even(t):
    &quot;&quot;&quot;
    &gt;&gt;&gt; t = Tree(1, [Tree(2, [Tree(3)]), Tree(4), Tree(5)])
    &gt;&gt;&gt; make_even(t)
    &gt;&gt;&gt; t.label
    2
    &gt;&gt;&gt; t.branches[0].branches[0].label
    4
    &quot;&quot;&quot;
<div class="sol-highlight">    if t.label % 2 != 0:
        t.label += 1
    for branch in t.branches:
        make_even(branch)
    return
    # Alternate Solution

    t.label += t.label % 2
    for branch in t.branches:
        make_even(branch)
    return</div></code></pre>

</solution>

<p>Use Ok to test your code:</p><pre style="margin-bottom:0;"><code class="nohighlight">python3 ok -q make_even<button id="copy-code-python3ok-qmake_even" class="inline-copy-button"><div class="copy-tooltip"><span>Copy</span></div>✂️</a></code></pre>
        <script>
        document.getElementById("copy-code-python3ok-qmake_even").onclick = () => copyCode('python3 ok -q make_even', "copy-code-python3ok-qmake_even");
        </script>
        <br/>


<h3 id="q3-cumulative-mul">Q3: Cumulative Mul</h3>


<p>Write a function <code>cumulative_mul</code> that mutates the Tree <code>t</code> so that each node's
label becomes the product of its label and all labels in the subtrees rooted at the node.</p>

<blockquote><p><strong>Hint</strong>:
Consider carefully when to do the mutation of the tree and whether that mutation should happen before or after processing the subtrees.</p></blockquote>

<solution>

<pre><code>def cumulative_mul(t):
    &quot;&quot;&quot;Mutates t so that each node&#x27;s label becomes the product of all labels in
    the corresponding subtree rooted at t.

    &gt;&gt;&gt; t = Tree(1, [Tree(3, [Tree(5)]), Tree(7)])
    &gt;&gt;&gt; cumulative_mul(t)
    &gt;&gt;&gt; t
    Tree(105, [Tree(15, [Tree(5)]), Tree(7)])
    &gt;&gt;&gt; otherTree = Tree(2, [Tree(1, [Tree(3), Tree(4), Tree(5)]), Tree(6, [Tree(7)])])
    &gt;&gt;&gt; cumulative_mul(otherTree)
    &gt;&gt;&gt; otherTree
    Tree(5040, [Tree(60, [Tree(3), Tree(4), Tree(5)]), Tree(42, [Tree(7)])])
    &quot;&quot;&quot;
<div class="sol-highlight">    for b in t.branches:
        cumulative_mul(b)
    total = t.label
    for b in t.branches:
        total *= b.label
    t.label = total

# Alternate solution using only one loop
def cumulative_mul(t):
    for b in t.branches:
        cumulative_mul(b)
        t.label *= b.label</div></code></pre>

</solution>

<p>Use Ok to test your code:</p><pre style="margin-bottom:0;"><code class="nohighlight">python3 ok -q cumulative_mul<button id="copy-code-python3ok-qcumulative_mul" class="inline-copy-button"><div class="copy-tooltip"><span>Copy</span></div>✂️</a></code></pre>
        <script>
        document.getElementById("copy-code-python3ok-qcumulative_mul").onclick = () => copyCode('python3 ok -q cumulative_mul', "copy-code-python3ok-qcumulative_mul");
        </script>
        <br/>


<h3 id="q4-prune-small">Q4: Prune Small</h3>


<p>Complete the function <code>prune_small</code> that takes in a <code>Tree</code> <code>t</code> and a
number <code>n</code> and prunes <code>t</code> mutatively. If <code>t</code> or any of its branches
has more than <code>n</code> branches, the <code>n</code> branches with the smallest labels
should be kept and any other branches should be <em>pruned</em>, or removed,
from the tree.</p>

<blockquote><p><em>Hint</em>: The <code>max</code> function takes in an <code>iterable</code> as well as an optional <code>key</code> argument (which takes in a one-argument function). 
For example, <code>max([&#x2d;7, 2, &#x2d;1], key = abs)</code> would return <code>&#x2d;7</code> since <code>abs(&#x2d;7)</code> is greater than <code>abs(2)</code> and <code>abs(&#x2d;1)</code>.</p></blockquote>

<solution>

<pre><code>def prune_small(t, n):
    &quot;&quot;&quot;Prune the tree mutatively, keeping only the n branches
    of each node with the smallest labels.

    &gt;&gt;&gt; t1 = Tree(6)
    &gt;&gt;&gt; prune_small(t1, 2)
    &gt;&gt;&gt; t1
    Tree(6)
    &gt;&gt;&gt; t2 = Tree(6, [Tree(3), Tree(4)])
    &gt;&gt;&gt; prune_small(t2, 1)
    &gt;&gt;&gt; t2
    Tree(6, [Tree(3)])
    &gt;&gt;&gt; t3 = Tree(6, [Tree(1), Tree(3, [Tree(1), Tree(2), Tree(3)]), Tree(5, [Tree(3), Tree(4)])])
    &gt;&gt;&gt; prune_small(t3, 2)
    &gt;&gt;&gt; t3
    Tree(6, [Tree(1), Tree(3, [Tree(1), Tree(2)])])
    &quot;&quot;&quot;
<div class="sol-highlight">    while len(t.branches) &gt; n:</div><div class="sol-highlight">        largest = max(t.branches, key=lambda x: x.label)</div><div class="sol-highlight">        t.branches.remove(largest)</div><div class="sol-highlight">    for b in t.branches:</div><div class="sol-highlight">        prune_small(b, n)</div></code></pre>

</solution>

<p>Use Ok to test your code:</p><pre style="margin-bottom:0;"><code class="nohighlight">python3 ok -q prune_small<button id="copy-code-python3ok-qprune_small" class="inline-copy-button"><div class="copy-tooltip"><span>Copy</span></div>✂️</a></code></pre>
        <script>
        document.getElementById("copy-code-python3ok-qprune_small").onclick = () => copyCode('python3 ok -q prune_small', "copy-code-python3ok-qprune_small");
        </script>
        <br/>


<h2 id="efficiency">Efficiency</h2>



<h3 id="q5-orders-of-growth">Q5: Orders of Growth</h3>

<p>The following is a quick check on different orders of growth and runtimes that you'll run into in this class. You can refer to the <a href="../../study-guide/orders-of-growth.1.html">orders of growth study guide</a> for helpful hints regarding these questions!</p>

<p>Determine the order of growth of each of the functions specified below.</p>

<p>Choose one of:</p>

<ul>
  <li>Constant</li>
  <li>Logarithmic</li>
  <li>Linear</li>
  <li>Quadratic</li>
  <li>Exponential</li>
  <li>None of these</li>
</ul>

<p>Use Ok to test your understanding:</p><pre style="margin-bottom:0;"><code class="nohighlight">python3 ok -q efficiency-quiz -u<button id="copy-code-python3ok-qefficiency-quiz-u" class="inline-copy-button"><div class="copy-tooltip"><span>Copy</span></div>✂️</a></code></pre>
        <script>
        document.getElementById("copy-code-python3ok-qefficiency-quiz-u").onclick = () => copyCode('python3 ok -q efficiency-quiz -u', "copy-code-python3ok-qefficiency-quiz-u");
        </script>
        <br/>

<p>What is the <em>worst case</em> (i.e. when <code>n</code> is prime) order of growth of <code>is_prime</code> in terms of <code>n</code>?</p>

<pre><code>def is_prime(n):
    for i in range(2, n):
        if n % i == 0:
            return False
    return True</code></pre>

<div class="sol-highlight">

<blockquote><p><strong>Linear Θ(n)</strong></p>

<p>In the worst case, <em>n</em> is prime, and we have to execute the
loop <em>n</em> - 2 times. Each iteration takes constant time (one conditional check
and one return statement). Therefore, the total time is <em>n</em> - 2 times a constant,
or simply linear.
</div></p></blockquote>

<p>What is the order of growth of <code>bar</code> in terms of <code>n</code>?</p>

<pre><code>def bar(n):
    i, sum = 1, 0
    while i &lt;= n:
        sum += biz(n)
        i += 1
    return sum

def biz(n):
    i, sum = 1, 0
    while i &lt;= n:
        sum += i**3
        i += 1
    return sum</code></pre>

<div class="sol-highlight">

<blockquote><p><strong>Quadratic Θ(n<sup>2</sup>)</strong></p>

<p>The body of the while loop in <code>bar</code> is executed <em>n</em> times.
Each iteration, one call to <code>biz(n)</code> is made. Note that <em>n</em> never changes,
so this call takes the same time to run each iteration.
Taking a look at <code>biz</code>, we see that there is another while loop. Be careful
to note that although the term being added to <code>sum</code> is cubed (<code>i**3</code>),
<code>i</code> itself is only incremented by 1 in each iteration.
This tells us that this while loop also executes <em>n</em> times, with each iteration
taking constant time, so the total time of <code>biz(n)</code> is <em>n</em> x constant, or linear.
Knowing that each call to <code>biz(n)</code> takes linear time,
we can conclude that each iteration of the while loop in <code>bar</code> is linear.
Therefore, the total runtime of <code>bar(n)</code> is quadratic.</p></blockquote>

</div>

<p>What is the order of growth of <code>foo</code> in terms of <code>n</code>, where <code>n</code> is the length
of <code>lst</code>? Assume that slicing a list and calling <code>len</code> on a list can both be
done in constant time.</p>

<pre><code>def foo(lst, i):
    mid = len(lst) // 2
    if mid == 0:
        return lst
    elif i &gt; 0:
        return foo(lst[mid:], &#x2d;1)
    else:
        return foo(lst[:mid], 1)</code></pre>

<div class="sol-highlight">

<blockquote><p><strong>Logarithmic Θ(log(n))</strong></p>

<p>A single recursive call is made in the body of <code>foo</code> on half the
input list (either the first half or the second half depending on the input
flag <code>i</code>). The base case is executed when the list either is empty or has only
one element. We start with an <em>n</em> element list and halve the list until there
is at most 1 element, which means there will be log(<em>n</em>) total calls. Each
call, constant work is done if we ignore the recursive call. The total runtime
is then log(<em>n</em>) * &theta;(1).</p>

<p><em>Note</em>: We simplified this problem by assuming that slicing a list takes
constant time. In reality, this operation is a bit more nuanced and may take
linear time. As an additional exercise, try determining the order of growth
of this function if we assuming slicing takes linear time.
</div></p></blockquote>


<h2 id="check-your-score-locally">Check Your Score Locally</h2>

<p>You can locally check your score on each question of this assignment by running</p>

<pre><code>python3 ok &#x2d;&#x2d;score</code></pre>

<p><strong>This does NOT submit the assignment!</strong> When you are satisfied with your score, submit the assignment to Gradescope to receive credit for it.</p>


<h2 id="submit">Submit</h2>

<p>Make sure to submit this assignment by uploading any files you've edited <strong>to the appropriate Gradescope assignment.</strong> For a refresher on how to do this, refer to <a href="../lab00.1.html#submit-with-gradescope">Lab 00</a>.</p>


<h1 id="optional-questions">Optional Questions</h1>


<blockquote><p>These questions are optional, but you must complete them in order
to be checked off before the end of the lab period. They are also
useful practice!</p></blockquote>


<h3 id="q6-is-bst">Q6: Is BST</h3>


<p>Write a function <code>is_bst</code>, which takes a Tree <code>t</code> and returns <code>True</code> if, and
only if, <code>t</code> is a valid binary search tree, which means that:</p>

<ul>
  <li>Each node has at most two children (a leaf is automatically a valid binary
  search tree)</li>
  <li>The children are valid binary search trees</li>
  <li>For every node, the entries in that node's left child are less than or equal
  to the label of the node</li>
  <li>For every node, the entries in that node's right child are greater than the
  label of the node</li>
</ul>

<p>An example of a BST is:</p>

<p><img class="img-responsive center-block" src="https://miro.medium.com/max/1424/1*F8MmBnUQyOA8-Rajg69nSQ.png" alt="bst" width="" height=""></p>

<p>Note that, if a node has only one child, that child could be considered either
the left or right child. You should take this into consideration.</p>

<p><em>Hint:</em> It may be helpful to write helper functions <code>bst_min</code> and <code>bst_max</code> that
return the minimum and maximum, respectively, of a Tree if it is a valid binary
search tree.</p>

<solution>

<pre><code>def is_bst(t):
    &quot;&quot;&quot;Returns True if the Tree t has the structure of a valid BST.

    &gt;&gt;&gt; t1 = Tree(6, [Tree(2, [Tree(1), Tree(4)]), Tree(7, [Tree(7), Tree(8)])])
    &gt;&gt;&gt; is_bst(t1)
    True
    &gt;&gt;&gt; t2 = Tree(8, [Tree(2, [Tree(9), Tree(1)]), Tree(3, [Tree(6)]), Tree(5)])
    &gt;&gt;&gt; is_bst(t2)
    False
    &gt;&gt;&gt; t3 = Tree(6, [Tree(2, [Tree(4), Tree(1)]), Tree(7, [Tree(7), Tree(8)])])
    &gt;&gt;&gt; is_bst(t3)
    False
    &gt;&gt;&gt; t4 = Tree(1, [Tree(2, [Tree(3, [Tree(4)])])])
    &gt;&gt;&gt; is_bst(t4)
    True
    &gt;&gt;&gt; t5 = Tree(1, [Tree(0, [Tree(&#x2d;1, [Tree(&#x2d;2)])])])
    &gt;&gt;&gt; is_bst(t5)
    True
    &gt;&gt;&gt; t6 = Tree(1, [Tree(4, [Tree(2, [Tree(3)])])])
    &gt;&gt;&gt; is_bst(t6)
    True
    &gt;&gt;&gt; t7 = Tree(2, [Tree(1, [Tree(5)]), Tree(4)])
    &gt;&gt;&gt; is_bst(t7)
    False
    &quot;&quot;&quot;
<div class="sol-highlight">    def bst_min(t):
        &quot;&quot;&quot;Returns the min of t, if t has the structure of a valid BST.&quot;&quot;&quot;
        if t.is_leaf():
            return t.label
        return min(t.label, bst_min(t.branches[0]))

    def bst_max(t):
        &quot;&quot;&quot;Returns the max of t, if t has the structure of a valid BST.&quot;&quot;&quot;
        if t.is_leaf():
            return t.label
        return max(t.label, bst_max(t.branches[&#x2d;1]))

    if t.is_leaf():
        return True
    if len(t.branches) == 1:
        c = t.branches[0]
        return is_bst(c) and (bst_max(c) &lt;= t.label or bst_min(c) &gt; t.label)
    elif len(t.branches) == 2:
        c1, c2 = t.branches
        valid_branches = is_bst(c1) and is_bst(c2)
        return valid_branches and bst_max(c1) &lt;= t.label and bst_min(c2) &gt; t.label
    else:
        return False</div></code></pre>

</solution>

<p>Use Ok to test your code:</p><pre style="margin-bottom:0;"><code class="nohighlight">python3 ok -q is_bst<button id="copy-code-python3ok-qis_bst" class="inline-copy-button"><div class="copy-tooltip"><span>Copy</span></div>✂️</a></code></pre>
        <script>
        document.getElementById("copy-code-python3ok-qis_bst").onclick = () => copyCode('python3 ok -q is_bst', "copy-code-python3ok-qis_bst");
        </script>
        <br/>


<h3 id="q7-add-trees">Q7: Add trees</h3>


<p>Define the function <code>add_trees</code>, which takes in two trees and returns a new
tree where each corresponding node from the first tree is added with the node
from the second tree. If a node at any particular position is present in one
tree but not the other, it should be present in the new tree as well.</p>

<blockquote><p><strong>Hint:</strong> You may want to use the built-in zip function to iterate over multiple
sequences at once.</p></blockquote>

<solution>

<pre><code>def add_trees(t1, t2):
    &quot;&quot;&quot;
    &gt;&gt;&gt; numbers = Tree(1,
    ...                [Tree(2,
    ...                      [Tree(3),
    ...                       Tree(4)]),
    ...                 Tree(5,
    ...                      [Tree(6,
    ...                            [Tree(7)]),
    ...                       Tree(8)])])
    &gt;&gt;&gt; print(add_trees(numbers, numbers))
    2
      4
        6
        8
      10
        12
          14
        16
    &gt;&gt;&gt; print(add_trees(Tree(2), Tree(3, [Tree(4), Tree(5)])))
    5
      4
      5
    &gt;&gt;&gt; print(add_trees(Tree(2, [Tree(3)]), Tree(2, [Tree(3), Tree(4)])))
    4
      6
      4
    &gt;&gt;&gt; print(add_trees(Tree(2, [Tree(3, [Tree(4), Tree(5)])]), \
    Tree(2, [Tree(3, [Tree(4)]), Tree(5)])))
    4
      6
        8
        5
      5
    &quot;&quot;&quot;
<div class="sol-highlight">    if not t1:</div><div class="sol-highlight">        return t2</div><div class="sol-highlight">    if not t2:</div><div class="sol-highlight">        return t1</div><div class="sol-highlight">    new_label = t1.label + t2.label</div><div class="sol-highlight">    t1_branches, t2_branches = list(t1.branches), list(t2.branches)</div><div class="sol-highlight">    length_t1, length_t2 = len(t1_branches), len(t2_branches)</div><div class="sol-highlight">    if length_t1 &lt; length_t2:</div><div class="sol-highlight">        t1_branches += [None for _ in range(length_t1, length_t2)]</div><div class="sol-highlight">    elif length_t1 &gt; length_t2:</div><div class="sol-highlight">        t2_branches += [None for _ in range(length_t2, length_t1)]</div><div class="sol-highlight">    return Tree(new_label, [add_trees(branch1, branch2) for branch1, branch2 in zip(t1_branches, t2_branches)])</div></code></pre>

</solution>

<p>Use Ok to test your code:</p><pre style="margin-bottom:0;"><code class="nohighlight">python3 ok -q add_trees<button id="copy-code-python3ok-qadd_trees" class="inline-copy-button"><div class="copy-tooltip"><span>Copy</span></div>✂️</a></code></pre>
        <script>
        document.getElementById("copy-code-python3ok-qadd_trees").onclick = () => copyCode('python3 ok -q add_trees', "copy-code-python3ok-qadd_trees");
        </script>
        <br/>

  </div>

  <div class='col-md-3 sticky'>
    <nav class='hidden-print hidden-sm hidden-xs sidebar'>
      <ul>
  <li><a href="index.html#topics">Topics</a></li>
  <ul>
    <li><a href="index.html#mutable-trees">Mutable Trees</a></li>
    <li><a href="index.html#efficiency-orders-of-growth">Efficiency (Orders of Growth)</a></li>
  </ul>
  <li><a href="index.html#required-questions">Required Questions</a></li>
  <ul>
    <li><a href="index.html#getting-started-videos">Getting Started Videos</a></li>
    <li><a href="index.html#trees">Trees</a></li>
    <ul>
      <li><a href="index.html#q1-wwpd-trees">Q1: WWPD: Trees</a></li>
      <li><a href="index.html#q2-make-even">Q2: Make Even</a></li>
      <li><a href="index.html#q3-cumulative-mul">Q3: Cumulative Mul</a></li>
      <li><a href="index.html#q4-prune-small">Q4: Prune Small</a></li>
    </ul>
    <li><a href="index.html#efficiency">Efficiency</a></li>
    <ul>
      <li><a href="index.html#q5-orders-of-growth">Q5: Orders of Growth</a></li>
    </ul>
    <li><a href="index.html#check-your-score-locally">Check Your Score Locally</a></li>
    <li><a href="index.html#submit">Submit</a></li>
  </ul>
  <li><a href="index.html#optional-questions">Optional Questions</a></li>
  <ul>
    <li><a href="index.html#q6-is-bst">Q6: Is BST</a></li>
    <li><a href="index.html#q7-add-trees">Q7: Add trees</a></li>
  </ul>
</ul>
    </nav>
  </div>
</div>

    </main>

    <footer class="container">
      <div class="row text-center">
        <div class="col col-sm-4">
          <h3><a href="../../index.html">CS 61A</a></h3>
          <ul class="nav nav-pills nav-stacked">
            <li><a href="../../weekly.html">Weekly Schedule</a></li>
            <li><a href="../../office-hours.html">Office Hours</a></li>
            <li><a href="../../staff.html">Staff</a></li>
          </ul>
        </div>
        <div class="col col-sm-4">
          <h3><a href="../../resources.1.html">Resources</a></h3>
          <ul class="nav nav-pills nav-stacked">
            <li><a href="../../articles/studying.html">Studying Guide</a></li>
            <li><a href="../../articles/debugging.html">Debugging Guide</a></li>
            <li><a href="../../articles/composition.html">Composition Guide</a></li>
            <li><a href="../../articles/pair-programming.html">Pair Programming</a></li>
          </ul>
        </div>
        <div class="col col-sm-4">
          <h3><a href="../../articles/about.html">Policies</a></h3>
          <ul class="nav nav-pills nav-stacked">
            <li><a href="../../articles/about.html#assignments">Assignments</a></li>
            <li><a href="../../articles/about.html#exams">Exams</a></li>
            <li><a href="../../articles/about.html#grading">Grading</a></li>
          </ul>
        </div>
      </div>
    </footer>

    

    <script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.20.0/min/vs/loader.min.js"></script>
  <link rel="stylesheet" data-name="vs/editor/editor.main" href="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.20.0/min/vs/editor/editor.main.min.css">
  <script>
      require.config({ paths: { 'vs': 'https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.20.0/min/vs' }});
      window.MonacoEnvironment = { getWorkerUrl: () => URL.createObjectURL(new Blob([`
      self.MonacoEnvironment = {
          baseUrl: 'https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.20.0/min'
      };
      importScripts('https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.20.0/min/vs/base/worker/workerMain.min.js');
  `], { type: 'text/javascript' }))
  };
  </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jsPlumb/2.15.5/js/jsplumb.min.js"></script>
    <script src="../../assets/js/network_storage.js"></script>
    <script src="../../assets/js/storable.js"></script>
    <script src="../../assets/js/editor.js"></script>
    <script src="../../assets/js/copy-button.js"></script>
    <script src="../../assets/js/env-diagram.js"></script>
    
<script src="../../assets/js/sketchy.js"></script>
<script>
  $('.sidebar ul').addClass('nav nav-stacked noselect');
  $('body').scrollspy({
    target: '.sidebar',
    offset: 40
  });

  function goToId(id) {
    var target = $(id);
    target.parent().show();
    $('html,body').animate({
      scrollTop: target.offset().top,
    }, 100);
    $("body").scrollspy('refresh');
  }

  if (location.hash) {
    setTimeout(function() {
      if (location.hash) {
        goToId(location.hash);
      }
    }, 1);
  }

  $("a").click(function(event) {
    var urlBeforeHashRegEx = new RegExp("^"+window.location.href.split("#")[0]);
    if (/^#/.test(this.hash) && urlBeforeHashRegEx.test(this.href)) {
      event.preventDefault();
      goToId(this.hash);
      document.location.hash = this.hash;
    }
  });
</script>

  </body>
</html>